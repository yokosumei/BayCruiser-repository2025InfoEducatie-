<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <title>kITTY</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
  <style>
    .stream-wrapper {
      display: flex;
      justify-content: center;
      padding: 10px;
    }

    #yoloStream {
      max-width: 90vw;
      max-height: 60vh;
      border: 2px solid black;
      object-fit: contain;
    }

    .stream-controls {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
      padding: 15px;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }
  </style>
</head>
<body>
  <header>
    <h1>Pagină de control</h1>
  </header>

  <main class="main-layout">
    <!-- Coloana stângă: taburi -->
    <aside id="sidebar">
      <div class="tab-container">
        <button class="tab-button" onclick="toggleTab('info')">Info</button>
        <button class="tab-button" onclick="toggleTab('scop')">Scop</button>
        <button class="tab-button" onclick="toggleTab('alte butoane')">Controale dronă</button>
      </div>
      <div class="tab-content-wrapper">
        <div id="info" class="tab-content">
          <p>Aceasta pagina este conceputa ca o punte dintre drona si salvamar</p>
          <p>more info idkFEATURES ig</p>
        </div>
        <div id="scop" class="tab-content">
          <p>De multe ori salvamarii au nevoie de ajutor pe mare si de o interventie rapida
            insa de multe ori nu pot ajunge la victima in timp util. Aici intervine drona, care 
            este capabila sa ajunga la victima in cateva secunde si sa ii ofere un colac de salvare.
          </p>
        </div>
        <div id="alte butoane" class="tab-content">
          <p>Controale dronă</p>
          <button onclick="TakeOff()">Decolare</button>
          <button onclick="Land()">Aterizare</button>
          <button onclick="displayServoMessage()">Misca servo</button>
        </div>
      </div>
    </aside>

    <!-- Dreapta: doar stream -->
<article id="livestream-article" class="custom-article">
  <h2>Livestream detecție</h2>
  <div class="stream-wrapper">
    <img id="video" src="/video_feed" width="640" height="480">
  </div>
</article>

<article id="upload-article" class="custom-article" style="display: none;">
  <h2>Upload video pentru detecție</h2>
  <form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept="video/*" required>
    <input type="submit" value="Upload Video">
  </form>

  {% if video_uploaded %}
    <h3>Rezultatul detecției:</h3>
    <video width="640" height="480" controls autoplay>
      <source src="{{ url_for('static', filename='uploads/result.mp4') }}" type="video/mp4">
      Browserul tău nu suportă tag-ul video.
    </video>
  {% endif %}
</article>
  </main>

  <!-- Butoanele sub articol -->
  <div class="stream-controls">
    <button onclick="startStream()">START</button>
    <button onclick="toggleView()" class="button buttons">⭕</button>
    <button onclick="stopStream()">STOP</button>
  </div>

  <footer>
    <p>Pagină creată în scopul concursului InfoEducație</p>
  </footer>

  <script src="{{ url_for('static', filename='scripts/main.js') }}"></script>
  <script>
    function toggleTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      document.getElementById(tabId).classList.add('active');
    }
  </script>
</body>
</html>
